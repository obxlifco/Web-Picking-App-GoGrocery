 <section class="right-part filter-pad inner_listing">
    <div class="topheading">
      <h1 class="autoclick">Manage {{childData.heading}}
      <button class="addpinkbtn" [routerLink]="['/'+childData.tablink+'/add']" (click)="globalService.addTab('add'+childData.heading,childData.tablink+'/add','Add '+childData.heading,childData.tabparrentid)"
        *ngIf="permission.add=='Y' && childData.ispopup=='N' && show_btn.add" matTooltipClass="mat-tooltip-white" mdTooltip="Add "><span
          class="icon-add"></span></button>
    <div class="clear"></div>
    </h1>
    </div>
      <!-- new inner tab -->
      <div class="innertab_sec inner_sec_resp">
        <div class="tabhedouter">
          <mat-tab-group (selectedTabChange)="loadGridData($event)">
            <mat-tab>
              <ng-template mat-tab-label>
                <a href="javascript:void(0)" class='page_tab_link'>
                  All ({{stat.all}})
                </a>
                <!-- <mat-icon class="icon-close" *ngIf="i>0" (click)="globalService.deleteTab(i,link.parent)"></mat-icon> -->
              </ng-template>
            </mat-tab>
      
            <mat-tab>
              <ng-template mat-tab-label>
                <a href="javascript:void(0)" class='page_tab_link'>
                  Active ({{stat.active}})
                </a>
                <!-- <mat-icon class="icon-close" *ngIf="i>0" (click)="globalService.deleteTab(i,link.parent)"></mat-icon> -->
              </ng-template>
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <a href="javascript:void(0)" class='page_tab_link'>
                  Inactive ({{stat.inactive}})
                </a>
                <!-- <mat-icon class="icon-close" *ngIf="i>0" (click)="globalService.deleteTab(i,link.parent)"></mat-icon> -->
              </ng-template>
            </mat-tab>
          </mat-tab-group>
        </div>
        <div class="serch_and_filtersec">
          <div class="serch_sec">
            <a href="javascript:void(0)"><span class="icon-search1"></span></a>
            <input type="text" placeholder="Search..." #search="ngModel" [(ngModel)]="search_text" (keyup)="generateGrid(1,1,'',filter,search.value,show_variant_product)">
          </div>
          <div class="filter_section">
            <button class="button" (click)="FiltertoggleCheck($event)"><span class="icon-filter"></span></button>
            <button class="button"><span class="icon-columns" (click)="loadColumnLayout()"></span></button>
            <button class="button" [matMenuTriggerFor]="tools"><span class="icon-menu"></span></button>
              <mat-menu #tools="matMenu" xPosition="before" [overlapTrigger]="false">
                <button mat-menu-item (click)="openProductImport(childData.tablink,'Main')" *ngIf="childData.is_import=='Y'">
                  <mat-icon class="icon-import"></mat-icon> Import
                </button>
                <button mat-menu-item (click)="openProductImport(childData.tablink,'Related')" *ngIf="childData.is_import=='Y'">
                  <mat-icon class="icon-import"></mat-icon> Import Related Products
                </button>
                <button mat-menu-item (click)="openProductPriceImport()" *ngIf="childData.is_import=='Y'">
                  <mat-icon class="icon-import"></mat-icon> Import Products Price
                </button>
              
                <button mat-menu-item (click)="OpenExportPopUp()" *ngIf="childData.is_export=='Y'">
                  <mat-icon class="icon-export"></mat-icon> Export
                </button>
                <!-- <button mat-menu-item><mat-icon  class="icon-shortcut"></mat-icon> Shortcut</button> -->
              </mat-menu>
          </div>
        </div>
      </div>
      <!-- new inner tab -->
    <div class="action-box">
        <label> {{bulk_ids.length}} Selected  (out of all {{config.currentPageCount}}) </label>
        <button mat-button (click)="globalService.addTab('Details'+childData.tablink,childData.tablink+'/details/'+individualRow.id+'','View '+childData.heading,childData.tabparrentid);globalService.navigateToUrl('/'+childData.tablink+'/details/'+individualRow.id+'')" *ngIf="bulk_ids.length==1">
        <mat-icon class="icon-search-box"></mat-icon>Details</button>    <!-- ///////////Edit////////////// -->
        <button mat-button *ngIf="bulk_ids.length==1 && permission.edit=='Y' && childData.ispopup=='N' && show_btn.edit" (click)="globalService.addTab('edit'+childData.tablink,childData.tablink+'/edit/'+individualRow.id+'','Edit '+childData.heading,childData.tabparrentid);globalService.navigateToUrl('/'+childData.tablink+'/edit/'+individualRow.id+'')"><mat-icon  class="icon-edit"></mat-icon>Edit</button>
        <button mat-button (click)="openPop(individualRow.id)" *ngIf="bulk_ids.length==1 && permission.edit=='Y' && childData.ispopup=='Y' && show_btn.edit"><mat-icon  class="icon-edit"></mat-icon>Edit</button>
        <button mat-button *ngIf="bulk_ids.length==1 && permission.edit=='N' && show_btn.edit" (click)="dialogsService.alert('Permission Error', 'You have no permission to edit!')"><mat-icon  class="icon-edit"></mat-icon>Edit</button>
        <button mat-button (click)="openPopExRate(individualRow.id)" *ngIf="bulk_ids.length==1 && permission.edit=='Y' && childData.heading=='Currency'"><mat-icon  class="icon-edit"></mat-icon>Edit</button>
        <!-- ///////////Delete/Block/Unblock////////////// -->
        <button mat-button (click)="updateStatusAll(2)" *ngIf="show_btn.delete"><mat-icon  class="icon-delete"></mat-icon>Delete</button>
        <button mat-button (click)="updateStatusAll(1)" *ngIf="bulk_ids.length==1 && individualRow.isblocked == 'Active' && show_btn.block"><mat-icon  class="icon-lock"></mat-icon>Block</button>
        <button mat-button (click)="updateStatusAll(0)" *ngIf="bulk_ids.length==1 && individualRow.isblocked == 'Inactive' && show_btn.block"><mat-icon  class="icon-unlock"></mat-icon>Unblock</button>
        <button mat-button (click)="updateStatusAll(1)" *ngIf="bulk_ids.length!=1 && show_btn.block"><mat-icon  class="icon-lock"></mat-icon>Block</button>
        <button mat-button (click)="updateStatusAll(0)" *ngIf="bulk_ids.length!=1 && show_btn.block"><mat-icon  class="icon-unlock"></mat-icon>Unblock</button>
        <!-- <button mat-button>Push Product Info</button> -->
        <button mat-icon-button  class="white-ripple pull-right"  (click)="generateGrid(0,'','','','',show_variant_product)"><mat-icon  class="icon-close"></mat-icon></button>
    </div>
  <div class="action-box orderfilter">
    <div class="datepic_sec">
        <div class="filtericon"><a href="javascript:void(0)"><span class="icon-filter"></span></a></div>
        <div class="serchtagbox" *ngFor="let item of advanced_search; let i=index">
          <p >{{item.show_name}}  
            <span *ngIf="!item.comparer" class="icon-equal"></span>
            <span *ngIf="item.comparer==1" class="icon-equal"></span>
            <span *ngIf="item.comparer==2" class="icon-mathematical_symbol"></span>
            <span *ngIf="item.comparer==3" class="icon-start-contains"></span>
            <span *ngIf="item.comparer==4" class="icon-end-contains"></span>
            <span *ngIf="item.comparer==5" class="icon-contains"></span>
            <span *ngIf="item.comparer==6" class="icon-not-contains"></span>
            <span *ngIf="item.comparer==7" class="icon-right"></span>
            <span *ngIf="item.comparer==8" class="icon-left"></span>
            <span class="icon-equals"></span> 
            <i *ngIf="item.key2=='n' || item.key2=='y'; else notShow">
              <p *ngIf="item.key2=='n'">
                Active
              </p>
              <p *ngIf="item.key2=='y'">
                  Inctive
                </p>
            </i>
              
              <ng-template #notShow>
                
                <p *ngIf="item.key2; else showKey">
                    {{item.key2}}
                </p>
                <ng-template #showKey>
                  <p>
                      {{item.key}}
                  </p>
                </ng-template>
              </ng-template>
            <a href="javascript:void(0)" (click)="remove_filter(i)"><span class="icon-close"></span></a>
            
          </p>
        </div>
        <div class="filterdrop_wrap">
            <mat-form-field appearance="outline" (click)="load_fiter_column()">
              <input  matInput placeholder="Select a column"  [matAutocomplete]="tdAuto" name="field_name" #field_name="ngModel" [(ngModel)]="formModel.field_name" (ngModelChange)="load_fiter_column()" >
            </mat-form-field>
            <mat-autocomplete  #tdAuto="matAutocomplete" >
              <mat-option  *ngFor="let item of field_arr; let i=index;" [value]="item.field" (click)="get_data(item,i)">
                <span >{{item.columns}}</span>
              </mat-option>
            </mat-autocomplete>
           <!-- <ng-select [items]="field_arr" bindLabel="columns" bindValue="field" #field_name="ngModel" appendTo="body" name="field_name"
              [(ngModel)]="formModel.field_name" (change)="onChange($event)"></ng-select> -->
            <!-- search tag -->			
        <div class="meta_keywordbox" id="meta_keywordbox" >
            <div class="headsec">{{formModel.field_name_show}}</div>
            <form #formdata="ngForm"  (ngSubmit)="formdata.valid && sendSearchData()">
                <div class="innerbox">
                    <div class="innrow">
                      <div class="dropbtn">
                        <div class="dop_icnbox">
                          <span class="icon-equal" *ngIf="!formModel.search_type"></span>
                          <span class="icon-equal" *ngIf="formModel.search_type=='1'"></span>
                          <span class="icon-mathematical_symbol" *ngIf="formModel.search_type=='2'"></span>
                          <span class="icon-start-contains" *ngIf="formModel.search_type=='3'"></span>
                          <span class="icon-end-contains" *ngIf="formModel.search_type=='4'"></span>
                          <span class="icon-contains" *ngIf="formModel.search_type=='5'"></span>
                          <span class="icon-not-contains" *ngIf="formModel.search_type=='6'"></span>
                          <span class="icon-right" *ngIf="formModel.search_type=='7'"></span>
                          <span class="icon-left" *ngIf="formModel.search_type=='8'"></span>
                        </div>
                        <mat-select  class="myFilter" #search_type="ngModel" name="search_type" [(ngModel)]="formModel.search_type" >
                            <mat-option *ngFor="let item of ConditionArr" [value]="item.type" >{{item.name}}</mat-option>
                        </mat-select>
                      </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='text'">
                        <mat-form-field appearance="outline">
                          <input matInput  placeholder="Type here" #search_data="ngModel" name="search_data" [(ngModel)]="formModel.search_data">
                        </mat-form-field>
                      </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='float'">
                        <mat-form-field appearance="outline">
                          <input matInput  type="number" placeholder="Enter value" #search_data="ngModel" name="search_data" [(ngModel)]="formModel.search_data">
                        </mat-form-field>
                      </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='select'">
                          <mat-form-field appearance="outline">
                            <mat-select #search_data="ngModel" name="search_data" [(ngModel)]="formModel.search_data" placeholder="Search here" #singleSelect [multiple]="false">
                              <ngx-mat-select-search [formControl]="bankMultiFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Nothing Found"></ngx-mat-select-search>
                              <mat-option *ngFor="let bank of filteredBanksMulti | async" [value]="bank.id" (click)="change_search_val(bank.name)">
                                {{bank.name}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                      </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='multi_select'">
                        <mat-form-field appearance="outline">
                          <mat-select #search_data="ngModel" name="search_data" [(ngModel)]="formModel.search_data" placeholder="Search here" #singleSelect [multiple]="true">
                            <ngx-mat-select-search [formControl]="bankMultiFilterCtrl" placeholderLabel="Search" noEntriesFoundLabel="Nothing Found"></ngx-mat-select-search>
                            <mat-option *ngFor="let bank of filteredBanksMulti | async" [value]="bank.id" (click)="change_search_val(bank.name)">
                              {{bank.name}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                    </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='fix_select'">
                        <mat-form-field appearance="outline">
                          <mat-select class="myFilter"  #search_data="ngModel" name="search_data" placeholder="Select" [(ngModel)]="formModel.search_data"  (ngModelChange)="get_select_data()" >
                              <mat-option *ngFor="let select_item of selectArr" [value]="select_item.id" (click)="change_search_val(select_item.name)">{{select_item.name}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div class="inputsec" *ngIf="formModel.input_type=='date'">
                        <mat-form-field appearance="outline">
                          <input matInput  placeholder="Select date" [owlDateTime]="picker1" [owlDateTimeTrigger]="picker1" (focus)="picker1.open()" #search_data="ngModel" name="search_data" [(ngModel)]="formModel.search_data">
                          <owl-date-time #picker1 [pickerType]="'calendar'"></owl-date-time>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="footer">
                      <a href="javascript:void(0)" class="cnc" (click)="cancel_filter()">Cancel</a>
                      <a href="javascript:void(0)" class="apl" (click)="sendSearchData()">Apply</a>
                    </div>
                </div>
              </form>
          </div>
        </div>
        <!-- search tag -->
    </div>
    <button mat-icon-button  class="white-ripple pull-right" (click)="CloseFilter($event)"><mat-icon  class="icon-close"></mat-icon></button>
  </div>
  <div class="body-part">
      <div class="table-list" *ngIf="showSkeletonLoaded">
        <table>
            <tr>
            <th class="check-select">
            <mat-checkbox name="selectedAll"  [(ngModel)]="selectedAll" id="list-all" (change)="toggleCheckAll($event)"></mat-checkbox>
            </th>
            <ng-container >
            <th  class="short" *ngFor="let item of temp_col"><span ></span></th>
            </ng-container> 
            </tr>
            <tr *ngFor="let item of temp_result">
              <td>
              <div ></div>
              <ng-template >
              <mat-checkbox name="Selected" id="list" ></mat-checkbox>
              </ng-template>
              </td>
              <ng-container >
                <td *ngFor="let item of temp_col"><ng-container><div  class="skeleto-loader"></div></ng-container></td>
              </ng-container>
            </tr>
        </table>
      </div>
      <div class="table-list" *ngIf="!showSkeletonLoaded">
          <table>
            <tr>
              <th class="check-select">
                <mat-checkbox name="selectedAll"  [(ngModel)]="selectedAll" id="list-all" (change)="toggleCheckAll($event)"></mat-checkbox>
              </th>
              <ng-container *ngFor="let col of cols">
                <th *ngIf="col.show == 1" class="short" (click)="generateGrid(0,1,col.field,filter,search.value,show_variant_product)">{{col.title}}<span [class]="(sortBy==col.field)?sortClass:''"></span>
                  <span class="icon-up up" *ngIf="sortBy!=col.field"></span>
                  <span class="icon-down down" *ngIf="sortBy!=col.field"></span>
                </th>
              </ng-container> 
            </tr>
            <tr [class.chec]="row.selected"  *ngFor="let row of result_list">
                <td>
                  <mat-checkbox name="row.Selected" id="list{{row.id}}" [checked]="row.selected" (change)="toggleCheck(row.id,$event)"></mat-checkbox>
                </td>
                <ng-container *ngFor="let col of cols">
                  <td *ngIf="col.show == 1" attr.data-th="{{col.title}}" align="{{ (col.field_type=='p' || col.field_type=='n')?'right':'' }}">
                    <span [ngClass]="col.field=='isblocked' ? (row[col.field]=='Active'?'status-box shipped':'status-box cancelled') : ''">
                      <ng-container *ngIf="col.field_type=='p' && col.field != 'name' && col.field != 'sku' && col.field != 'category'">
                        {{((col.child!='')?((row[col.child])?row[col.child][col.field]:''):row[col.field])| number: '1.2-2' }}   
                      </ng-container>
                      <ng-container *ngIf="col.field_type!='p' && col.field != 'name' && col.field != 'sku' && col.field != 'category'">
                        {{((col.child!='')?((row[col.child])?row[col.child][col.field]:''):row[col.field])|limitTo:50 }}   
                      </ng-container>

                      <ng-container *ngIf="col.field_type!='p' && (col.field == 'name' || col.field == 'sku' || col.field == 'category')">
                        <a href="javascript:void(0)" (click)="globalService.addTab('Details'+childData.tablink,childData.tablink+'/details/'+row.id+'','View '+childData.heading,childData.tabparrentid);globalService.navigateToUrl('/'+childData.tablink+'/details/'+row.id+'')" *ngIf="col.field == 'name'">{{row.name}}</a>
                        <a href="javascript:void(0)" (click)="globalService.addTab('Details'+childData.tablink,childData.tablink+'/details/'+row.id+'','View '+childData.heading,childData.tabparrentid);globalService.navigateToUrl('/'+childData.tablink+'/details/'+row.id+'')" *ngIf="col.field == 'sku'">{{row.sku}}</a>

                        <a href="javascript:void(0)" (click)="globalService.addTab('editcategory','category/edit/'+row.category_id[0].id+'','Edit Category',childData.tabparrentid);globalService.navigateToUrl('/category/edit/'+row.category_id[0].id+'')"
                          *ngIf="col.field == 'category'">{{row.category}}</a>

                      </ng-container>
                    </span>
                  </td>
                </ng-container>
              </tr>
              <tr *ngIf="pagination.total_page==0">
                <td [attr.colspan]="colSpanCount" align="center">No records found</td>
              </tr>
        </table>
      </div>
    </div>
    <div class="clear"></div>
      
  </section>
    <div class="pagination-box" *ngIf="pagination.total_page>1">
          <span *ngFor="let list of total_list | paginate: config"></span>
                  <pagination-template #p="paginationApi" [id]="config.id"  (pageChange)="generateGrid(0,$event,'',filter,search.value,show_variant_product)" [maxSize]="maxSize">
              <ul class="pagination">
                  <li class="pagination-previous" [class.disabled]="p.isFirstPage()" *ngIf="!p.isFirstPage()">
                      <a  (click)="p.previous()"><span class="icon-left"></span></a>
                  </li>
                  <li *ngFor="let page of p.pages" [class.active]="p.getCurrent() === page.value">
                      <a (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">
                          <span>{{ page.label }}</span>
                      </a>
                      <a *ngIf="p.getCurrent() === page.value">
                          <span>{{ page.label }}</span>
                      </a>
                  </li>
                  <li class="pagination-next" [class.disabled]="p.isLastPage()" *ngIf="!p.isLastPage()">
                      <a  (click)="p.next()"><span class="icon-right"></span></a>
                  </li>
              </ul>
          </pagination-template>
      </div> 
    <div class="clear"></div>