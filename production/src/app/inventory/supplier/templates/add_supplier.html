<section class="right-part filter-pad addall_page">
  	<div class="body-part addorderbody addorderbodypart" *ngIf="_globalService.isFormLoaded == 'Yes'">
  		<form #supplierForm="ngForm" novalidate (ngSubmit)="supplierForm.valid && addEditSupplier(supplierForm)">
		<input type="hidden" name="supplierId" [(ngModel)]="formModel.supplierId">
		  	<div class="topheading">
			  	<h1>{{(formModel.supplierId)?'Edit':'Add'}} Supplier 
				  	<div class="btn-header">
						<button type="submit" mat-raised-button class="btn-main">Continue</button>
			          	<button type="button" mat-raised-button class="btn-line" (click)="_globalService.deleteTab(tabIndex,parentId)">Cancel</button>
					  	<label>Fields marked with <span>*</span> are compulsory</label>
				  	</div>
				  	<div class="clear"></div>
			  	</h1>
		  	</div>
		  	<div class="filter">
			  	<div class="stap">
					<ul *ngIf="formModel.supplierId>0 && add_edit=='edit'">
						<li class="active"><div class="nom"></div>Genaral Information</li>
						<li><a (click)="_globalService.setTab(tabIndex,'/suppliers/edit/'+formModel.supplierId+'/purchase_order')" [routerLink]="['/suppliers/edit/'+formModel.supplierId+'/purchase_order']"><div class="nom"></div>Purchase Order Details</a></li>
					</ul>
					<ul *ngIf="add_edit=='add'">
						<li class="active"><div class="nom"></div>Genaral Information</li>
						<li><div class="nom"></div>Purchase Order Details</li>
					</ul>
					<div class="clear"></div>
			  	</div>
			 </div>	
		  	<div class="clear"></div>		  
			<div class="box">
				<div class="fixed-width">
					<div class="alert alert-success" *ngIf="successMsg">{{successMsg}}</div>
   		  			<div class="alert alert-danger" *ngIf="errorMsg">{{errorMsg}}</div>	
					<div class="row">
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Supplier Name</mat-label>
								<input matInput placeholder="Supplier Name" required #name="ngModel"  name="name" [(ngModel)]="formModel.name" pattern="^(?!\s*$|\s).*$">
								<mat-error *ngIf="name.errors && name.errors.required">
									This is a <strong>required</strong> field
								</mat-error>
								<mat-error *ngIf="name.errors && name.errors.pattern">White space is not allowed at beginning.</mat-error>
							</mat-form-field>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Company Code</mat-label>
								<input matInput placeholder="Company Code" required #code="ngModel"  name="code" [(ngModel)]="formModel.code"  pattern="^(?!\s*$|\s).*$">
								<mat-error *ngIf="code.errors && code.errors.required">
									This is a <strong>required</strong> field
								</mat-error>
								<mat-error *ngIf="code.errors && code.errors.pattern">White space is not allowed at beginning.</mat-error>
							</mat-form-field>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Company Name</mat-label>								
								<input matInput placeholder="Company Name" #company_name="ngModel"  name="company_name" [(ngModel)]="formModel.company_name">
							</mat-form-field>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Contact Person</mat-label>								
								<input matInput placeholder="Contact Person" #contact_person="ngModel"  name="contact_person" [(ngModel)]="formModel.contact_person">
							</mat-form-field>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Email</mat-label>
								<input matInput placeholder="Email" required #email="ngModel"  name="email" [(ngModel)]="formModel.email" pattern="[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}"  >
								<mat-error *ngIf="email.errors && email.errors.required">
									This is a <strong>required</strong> field
								</mat-error>
								<mat-error *ngIf="email.errors && email.errors.pattern">
									Enter a valid <strong>email</strong> address
								</mat-error>
							</mat-form-field>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline" >
							<mat-label>Status</mat-label>						
							<mat-select required placeholder="Status" #status="ngModel" name="status" [(ngModel)]="formModel.isblocked">
								<mat-option value="n">Active</mat-option>
								<mat-option value="y">Inactive</mat-option>
							</mat-select>
							</mat-form-field>
						</div>
					</div>
					
					<div class="row">
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Zip Code</mat-label>
								<input matInput placeholder="Zip Code" #zip="ngModel"  name="zip" [(ngModel)]="formModel.zip" minlength="6" maxlength="6">
							</mat-form-field>
							<mat-error *ngIf="zip.errors && zip.errors.minlength">
								Zip Code should be of 6 characters
							</mat-error>
							<mat-error *ngIf="zip.errors && zip.errors.maxlength">
								Zip Code should be of 6 characters
							</mat-error>
						</div>
						<div class="col-md-4">
							<div  class="md-block">
								<!-- <mat-form-field appearance="outline" >
								<mat-label>Country</mat-label>										
								<mat-select placeholder="Country" #country_id="ngModel" name="country_id" [(ngModel)]="formModel.country_id" (selectionChange)="get_states(country_id.value)">
									<mat-option *ngFor="let country of List.country_list" [value]="country.id">{{country.country_name}}</mat-option>
								</mat-select>
								</mat-form-field> -->
								<ng-select [items]="List.country_list"
									placeholder="Country"
									bindLabel="country_name" bindValue="id"
									#country_id="ngModel" name="country_id" [(ngModel)]="formModel.country_id"
									(change)="getStates(formModel.country_id)"
								>
								</ng-select>
							</div>
						</div>
						<div class="col-md-4">
							<div class="md-block">
								<!-- <mat-form-field appearance="outline" >
								<mat-label>State</mat-label>										
								<mat-select placeholder="State" #state="ngModel" name="state" [(ngModel)]="formModel.state">
									<mat-option *ngFor="let state of List.state_list" [value]="state.id">{{state.state_name}}</mat-option>
								</mat-select>
								</mat-form-field> -->
								<ng-select [items]="List.state_list"
									placeholder="State"
									bindLabel="state_name" bindValue="id"
									#state="ngModel" name="state" [(ngModel)]="formModel.state"
								>
								</ng-select>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Phone1</mat-label>										
								<input matInput placeholder="Phone1" #phone="ngModel"  name="phone" [(ngModel)]="formModel.phone" minlength="10" maxlength="12">
							</mat-form-field>
							<mat-error *ngIf="phone.errors && phone.errors.minlength">
								Phone number should be between 10 to 12 characters
							</mat-error>
							<mat-error *ngIf="phone.errors && phone.errors.maxlength">
								Phone number should be between 10 to 12 characters
							</mat-error>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
							<mat-label>Phone2</mat-label>
								<input matInput placeholder="Phone2" #phone_two="ngModel"  name="phone_two" [(ngModel)]="formModel.phone_two" minlength="10" maxlength="12">
							</mat-form-field>
							<mat-error *ngIf="phone_two.errors && phone_two.errors.minlength">
								Phone number should be between 10 to 12 characters
							</mat-error>
							<mat-error *ngIf="phone_two.errors && phone_two.errors.maxlength">
								Phone number should be between 10 to 12 characters
							</mat-error>
						</div>
						<div class="col-md-4">
							<mat-form-field appearance="outline"  class="md-block">
							<mat-label>Fax</mat-label>
								<input matInput placeholder="Fax" #fax="ngModel"  name="fax" [(ngModel)]="formModel.fax">
							</mat-form-field>
						</div>
					</div>	
					<div class="row">
						<div class="col-md-4">
							<div class="md-block">
								<!-- <mat-form-field appearance="outline" >
								<mat-label>Currency</mat-label>										
								<mat-select placeholder="Currency" #currency_id="ngModel" name="currency_id" [(ngModel)]="formModel.currency_id">
									<mat-option *ngFor="let currency of List.currency_list" [value]="currency.id">{{currency.currencyname}}</mat-option>
								</mat-select>
								</mat-form-field> -->
								<ng-select [items]="List.currency_list"
									placeholder="Currency"
									bindLabel="currencyname" bindValue="id"
									#currency_id="ngModel" name="currency_id" [(ngModel)]="formModel.currency_id"
								>
								</ng-select>
							</div>
						</div>
						<div class="col-md-4">
							<div  class="md-block">
								<!-- <mat-form-field appearance="outline" >
								<mat-label>Default Warehouse</mat-label>										
								<mat-select placeholder="Default Warehouse" #default_warehouse_id="ngModel" name="default_warehouse_id" [(ngModel)]="formModel.default_warehouse_id">
									<mat-option *ngFor="let warehouse of List.warehouse_list" [value]="warehouse.id">{{warehouse.name}}</mat-option>
								</mat-select>
								</mat-form-field> -->
								<ng-select [items]="List.warehouse_list"
									placeholder="Default Warehouse"
									bindLabel="name" bindValue="id"
									#default_warehouse_id="ngModel" name="default_warehouse_id" [(ngModel)]="formModel.default_warehouse_id"
								>
								</ng-select>
							</div>
						</div>
						<div class="col-md-4">
							<div class="md-block">
								<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Lead Time</mat-label>
								<input matInput placeholder="Lead Time" #lead_time="ngModel"  name="lead_time" [(ngModel)]="formModel.lead_time">
							</mat-form-field>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<div  class="md-block">
								<!-- <mat-form-field appearance="outline" >
								<mat-label>Supplier User</mat-label>
								<mat-select placeholder="Supplier User" #user_id="ngModel" name="user_id" [(ngModel)]="formModel.user_id">
									<mat-option *ngFor="let user of List.userList" [value]="user.id">{{user.employee_name}}</mat-option>
								</mat-select>
								</mat-form-field> -->
								<ng-select [items]="List.userList"
									placeholder="Supplier User"
									bindLabel="employee_name" bindValue="id"
									#user_id="ngModel" name="user_id" [(ngModel)]="formModel.user_id"
								>
								</ng-select>
							</div>
						</div>
						<div class="col-md-6">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>City</mat-label>
								<input matInput placeholder="City" #city="ngModel"  name="city" [(ngModel)]="formModel.city">
							</mat-form-field>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Address1</mat-label>
								<textarea matInput placeholder="Address1" #address_one="ngModel"  name="address_one" [(ngModel)]="formModel.address_one" rows="5"></textarea>
							</mat-form-field>
						</div>
						<div class="col-md-6">
							<mat-form-field appearance="outline"  class="md-block">
								<mat-label>Address2</mat-label>
								<textarea matInput placeholder="Address2" #address_two="ngModel"  name="address_two" [(ngModel)]="formModel.address_two" rows="5"></textarea>
							</mat-form-field>
						</div>
					</div> 
				</div>
				<div class="btn-header hidden-xs">
					<button type="submit" mat-raised-button class="btn-main">Continue</button>
					<button type="button" mat-raised-button class="btn-line" (click)="_globalService.deleteTab(tabIndex,parentId)">Cancel</button>
				</div> 
				<div class="clear"></div> 
			</div>
		  	<div class="clear"></div>	
	  	</form>	  
	</div>
</section>
